var appName;var popupMask;var popupDialog;var clientId;var realm;var redirect_uri;var clientSecret;var scopeSeparator;var additionalQueryStringParams;function handleLogin(){var o=[];var b=window.swaggerUi.api.authSchemes||window.swaggerUi.api.securityDefinitions;if(b){var m;var f=b;for(m in f){var e=f[m];if(e.type==="oauth2"&&e.scopes){var q;if(Array.isArray(e.scopes)){var h;for(h=0;h<e.scopes.length;h++){o.push(e.scopes[h])}}else{for(q in e.scopes){o.push({scope:q,description:e.scopes[q],OAuthSchemeKey:m})}}}}}if(window.swaggerUi.api&&window.swaggerUi.api.info){appName=window.swaggerUi.api.info.title}$(".api-popup-dialog").remove();popupDialog=$(['<div class="api-popup-dialog">','<div class="api-popup-title">Select OAuth2.0 Scopes</div>','<div class="api-popup-content">',"<p>Scopes are used to grant an application different levels of access to data on behalf of the end user. Each API may declare one or more scopes.",'<a href="#">Learn how to use</a>',"</p>","<p><strong>"+appName+"</strong> API requires the following scopes. Select which ones you want to grant to Swagger UI.</p>",'<ul class="api-popup-scopes">',"</ul>",'<p class="error-msg"></p>','<div class="api-popup-actions"><button class="api-popup-authbtn api-button green" type="button">Authorize</button><button class="api-popup-cancel api-button gray" type="button">Cancel</button></div>',"</div>","</div>"].join(""));$(document.body).append(popupDialog);popup=popupDialog.find("ul.api-popup-scopes").empty();for(h=0;h<o.length;h++){q=o[h];str='<li><input type="checkbox" id="scope_'+h+'" scope="'+q.scope+'"" oauthtype="'+q.OAuthSchemeKey+'"/><label for="scope_'+h+'">'+q.scope;if(q.description){if($.map(b,function(s,r){return r}).length>1){str+='<br/><span class="api-scope-desc">'+q.description+" ("+q.OAuthSchemeKey+")</span>"}else{str+='<br/><span class="api-scope-desc">'+q.description+"</span>"}}str+="</label></li>";popup.append(str)}var c=$(window),a=c.width(),j=c.height(),p=c.scrollTop(),n=popupDialog.outerWidth(),g=popupDialog.outerHeight(),l=(j-g)/2+p,d=(a-n)/2;popupDialog.css({top:(l<0?0:l)+"px",left:(d<0?0:d)+"px"});popupDialog.find("button.api-popup-cancel").click(function(){popupMask.hide();popupDialog.hide();popupDialog.empty();popupDialog=[]});$("button.api-popup-authbtn").unbind();popupDialog.find("button.api-popup-authbtn").click(function(){popupMask.hide();popupDialog.hide();var B=window.swaggerUi.api.authSchemes;var G=window.location;var w=location.pathname.substring(0,location.pathname.lastIndexOf("/"));var u=G.protocol+"//"+G.host+w+"/o2c.html";var i=window.oAuthRedirectUrl||u;var v=null;var D=[];var x=popup.find("input:checked");var z=[];var s;for(k=0;k<x.length;k++){var F=$(x[k]).attr("scope");if(D.indexOf(F)===-1){D.push(F)}var y=$(x[k]).attr("oauthtype");if(z.indexOf(y)===-1){z.push(y)}}window.enabledScopes=D;for(var C in B){if(B.hasOwnProperty(C)&&z.indexOf(C)!=-1){var r=B[C].flow;if(B[C].type==="oauth2"&&r&&(r==="implicit"||r==="accessCode")){var A=B[C];v=A.authorizationUrl+"?response_type="+(r==="implicit"?"token":"code");window.swaggerUi.tokenName=A.tokenName||"access_token";window.swaggerUi.tokenUrl=(r==="accessCode"?A.tokenUrl:null);s=C}else{if(B[C].type==="oauth2"&&r&&(r==="application")){var A=B[C];window.swaggerUi.tokenName=A.tokenName||"access_token";clientCredentialsFlow(D,A.tokenUrl,C);return}else{if(B[C].grantTypes){var x=B[C].grantTypes;for(var E in x){if(x.hasOwnProperty(E)&&E==="implicit"){var A=x[E];var H=A.loginEndpoint.url;v=A.loginEndpoint.url+"?response_type=token";window.swaggerUi.tokenName=A.tokenName}else{if(x.hasOwnProperty(E)&&E==="accessCode"){var A=x[E];var H=A.tokenRequestEndpoint.url;v=A.tokenRequestEndpoint.url+"?response_type=code";window.swaggerUi.tokenName=A.tokenName}}}}}}}}redirect_uri=i;v+="&redirect_uri="+encodeURIComponent(i);v+="&realm="+encodeURIComponent(realm);v+="&client_id="+encodeURIComponent(clientId);v+="&scope="+encodeURIComponent(D.join(scopeSeparator));v+="&state="+encodeURIComponent(s);for(var C in additionalQueryStringParams){v+="&"+C+"="+encodeURIComponent(additionalQueryStringParams[C])}window.open(v)});popupMask.show();popupDialog.show();return}function handleLogout(){for(key in window.swaggerUi.api.clientAuthorizations.authz){window.swaggerUi.api.clientAuthorizations.remove(key)}window.enabledScopes=null;$(".api-ic.ic-on").addClass("ic-off");$(".api-ic.ic-on").removeClass("ic-on");$(".api-ic.ic-warning").addClass("ic-error");$(".api-ic.ic-warning").removeClass("ic-warning")}function initOAuth(a){var b=(a||{});var c=[];appName=(b.appName||c.push("missing appName"));popupMask=(b.popupMask||$("#api-common-mask"));popupDialog=(b.popupDialog||$(".api-popup-dialog"));clientId=(b.clientId||c.push("missing client id"));clientSecret=(b.clientSecret||null);realm=(b.realm||c.push("missing realm"));scopeSeparator=(b.scopeSeparator||" ");additionalQueryStringParams=(b.additionalQueryStringParams||{});if(c.length>0){log("auth unable initialize oauth: "+c);return}$("pre code").each(function(d,f){hljs.highlightBlock(f)});$(".api-ic").unbind();$(".api-ic").click(function(d){if($(d.target).hasClass("ic-off")){handleLogin()}else{handleLogout()}false})}function clientCredentialsFlow(c,b,a){var d={client_id:clientId,client_secret:clientSecret,scope:c.join(" "),grant_type:"client_credentials"};$.ajax({url:b,type:"POST",data:d,success:function(f,g,e){onOAuthComplete(f,a)},error:function(e,g,f){onOAuthComplete("")}})}window.processOAuthCode=function processOAuthCode(b){var a=b.state;var c={client_id:clientId,code:b.code,grant_type:"authorization_code",redirect_uri:redirect_uri};if(clientSecret){c.client_secret=clientSecret}$.ajax({url:window.swaggerUi.tokenUrl,type:"POST",data:c,success:function(e,f,d){onOAuthComplete(e,a)},error:function(d,f,e){onOAuthComplete("")}})};window.onOAuthComplete=function onOAuthComplete(d,c){if(d){if(d.error){var e=$("input[type=checkbox],.secured");e.each(function(b){e[b].checked=false});alert(d.error)}else{var a=d[window.swaggerUi.tokenName];if(!c){c=d.state}if(a){var f=null;$.each($(".auth .api-ic .api_information_panel"),function(h,g){var l=g;if(l&&l.childNodes){var b=[];$.each((l.childNodes),function(p,o){var i=o.innerHTML;if(i){b.push(i)}});var n=[];for(var j=0;j<b.length;j++){var m=b[j];if(window.enabledScopes&&window.enabledScopes.indexOf(m)==-1){n.push(m)}}if(n.length>0){f=g.parentNode.parentNode;$(f.parentNode).find(".api-ic.ic-on").addClass("ic-off");$(f.parentNode).find(".api-ic.ic-on").removeClass("ic-on");$(f).find(".api-ic").addClass("ic-warning");$(f).find(".api-ic").removeClass("ic-error")}else{f=g.parentNode.parentNode;$(f.parentNode).find(".api-ic.ic-off").addClass("ic-on");$(f.parentNode).find(".api-ic.ic-off").removeClass("ic-off");$(f).find(".api-ic").addClass("ic-info");$(f).find(".api-ic").removeClass("ic-warning");$(f).find(".api-ic").removeClass("ic-error")}}});window.swaggerUi.api.clientAuthorizations.add(c,new SwaggerClient.ApiKeyAuthorization("Authorization","Bearer "+a,"header"))}}}};